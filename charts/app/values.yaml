################################################################################
# Application Configuration
################################################################################

# Application metadata
app:
  name: ""  # Required: application name
  team: ""  # Required: team owner
  costCenter: ""

# Container image
image:
  repository: nginx
  tag: "latest"
  pullPolicy: IfNotPresent

# Replicas and scaling
replicaCount: 2

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# Container configuration
container:
  port: 80

  # Environment variables
  env: []
  # - name: DATABASE_URL
  #   value: "postgres://..."
  # - name: STORAGE_BUCKET
  #   valueFrom:
  #     secretKeyRef:
  #       name: app-secrets
  #       key: bucket-name

  # Resource limits
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  # Health checks
  livenessProbe:
    httpGet:
      path: /health
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /ready
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5

# Service configuration
service:
  type: ClusterIP
  port: 80

# Ingress configuration
ingress:
  enabled: false
  className: alb
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
  hosts:
    - host: app.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

# ConfigMap data
configMap:
  enabled: false
  data: {}

# Secrets (reference only - create separately)
secrets:
  enabled: false
  name: ""

################################################################################
# Infrastructure Configuration (HCP Terraform Provisioning)
#
# SIMPLICIDADE TOTAL - Dev escolhe apenas FLAVOR
# Platform Team decide cloud provider (AWS ou Azure)
################################################################################

infrastructure:
  # Enable infrastructure provisioning
  enabled: false
  
  # HCP Terraform Organization
  organization: plathub
  
  # Namespace do HCP Terraform Operator
  namespace: terraform-system
  
  # Secret com token HCP Terraform
  tokenSecret: hcp-terraform-token
  
  # Terraform version
  terraformVersion: "1.7.0"
  
  # Execution mode
  executionMode: remote
  
  # Cloud Provider - Gerenciado pelo Platform Team
  # Options: aws, azure
  cloudProvider: aws
  
  # AWS Configuration (quando cloudProvider=aws)
  aws:
    region: us-east-1
  
  # Azure Configuration (quando cloudProvider=azure)
  azure:
    location: eastus
    resourceGroup: platform-resources

  #-----------------------------------------------------------------------------
  # STORAGE - Developer Interface
  # Dev escolhe apenas: flavor, size, encryption, versioning
  #-----------------------------------------------------------------------------
  storage:
    enabled: false
    
    # Flavor Options:
    #   standard - Acesso frequente, uso geral
    #   premium  - Alta performance (databases)
    #   economy  - Acesso infrequente (logs, backups)
    #   archive  - Cold storage (compliance)
    flavor: standard
    
    # Size (não usado para provisioning, apenas documentação)
    size: 10Gi
    
    # Encryption at rest
    encryption: true
    
    # Versioning
    versioning: false

  #-----------------------------------------------------------------------------
  # Database Configuration
  # Dev escolhe engine + flavor de capacidade
  #-----------------------------------------------------------------------------
  database:
    enabled: false

    # Tipo de database
    # Options: postgres, mysql
    engine: postgres

    # Flavor de capacidade
    # Options:
    #   - small       : Dev/testes (2 vCPU, 4GB RAM)
    #   - medium      : Produção leve (4 vCPU, 8GB RAM)
    #   - large       : Produção (8 vCPU, 32GB RAM)
    #   - xlarge      : Alta demanda (16 vCPU, 64GB RAM)
    flavor: small

    # Database version
    version: "15"

    # Storage size in GB
    storageSize: 20

    # High availability (replica em outra AZ)
    highAvailability: false

    # Backup retention in days
    backupRetentionDays: 7

  #-----------------------------------------------------------------------------
  # Cache Configuration
  # Para sessões, cache de queries, rate limiting
  #-----------------------------------------------------------------------------
  cache:
    enabled: false

    # Tipo de cache
    # Options: redis, memcached
    engine: redis

    # Flavor de capacidade
    # Options:
    #   - small       : 1.5GB RAM (dev, cache básico)
    #   - medium      : 6GB RAM (produção)
    #   - large       : 13GB RAM (alta demanda)
    flavor: small

    # High availability (replica)
    highAvailability: false

  #-----------------------------------------------------------------------------
  # Drift Detection Configuration
  # Automated drift detection via scheduled plans
  #-----------------------------------------------------------------------------
  driftDetection:
    # Enable drift detection
    enabled: false
    
    # Cron schedule for drift checks
    # Default: Every 1 hour
    # Examples:
    #   - "0 */1 * * *"   : Every hour
    #   - "0 */6 * * *"   : Every 6 hours
    #   - "0 9 * * *"     : Daily at 9 AM
    #   - "0 9 * * 1"     : Weekly on Monday at 9 AM
    schedule: "0 */1 * * *"
    
    # Container image for drift detector
    # Must have: kubectl, curl, jq, bash
    image: "bitnami/kubectl:1.28"
    
    # History limit for CronJob
    historyLimit: 3
    
    # Notifications configuration
    notifications:
      enabled: false
      
      # Webhook URL para notificações (Slack, Teams, etc)
      # Slack webhook format: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
      # Teams webhook format: https://outlook.office.com/webhook/...
      webhookUrl: ""
      
      # Notification channels
      channels:
        - slack
        # - teams
        # - email
      
      # Only notify on drift (não notifica quando está synced)
      onlyOnDrift: true
